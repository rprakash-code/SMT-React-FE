  public string TenantId { get; set; }
        public string AzureSQLClientId { get; set; }
        public string AzureSQLClientSecret { get; set; }
        public string SqlDatabaseUrl { get; set; }
        public string Instance { get; set; }
        public string Domain { get; set; }
		
		
		// Register the Settings class
builder.Services.Configure<IAMSettings>(builder.Configuration.GetSection("IAMSettings"));

// Register your service
builder.Services.AddScoped<IAMReconciliationService>();




using Microsoft.Extensions.Options;
using YourProject.Settings; // Add this namespace

public class IAMReconciliationService
{
    private readonly IAMSettings _settings;

    public IAMReconciliationService(IOptions<IAMSettings> settings)
    {
        _settings = settings.Value; // This will auto-bind the appsettings.json values
    }

    public void ConnectToDatabase()
    {
        Console.WriteLine($"Connecting to {_settings.SqlDatabaseUrl} with Client ID: {_settings.AzureSQLClientId}");
    }
}




using Microsoft.AspNetCore.Mvc;

[ApiController]
[Route("api/[controller]")]
public class ReconciliationController : ControllerBase
{
    private readonly IAMReconciliationService _reconciliationService;

    public ReconciliationController(IAMReconciliationService reconciliationService)
    {
        _reconciliationService = reconciliationService;
    }

    [HttpGet]
    public IActionResult TestConnection()
    {
        _reconciliationService.ConnectToDatabase();
        return Ok("Connection test executed successfully.");
    }
}


